# hello-provider 模块的 Tomcat 容器所监听的端口
server:
  port: 8081

# hello-provider 模块的应用名字，也是微服务的默认名字
spring:
  application:
    name: hello-provider-service
  # Spring Boot 主程序启动相关的全局核心配置
  main:
    allow-bean-definition-overriding: true
    allow-circular-references: true

# 向 Spring Boot Actuator 监控器暴露所有的端点
management:
  endpoints:
    web:
      exposure:
        include: '*'
# Dubbo 配置
dubbo:
  # 应用配置
  application:
    name: ${spring.application.name}
    owner: developer
    organization: cloud.tangyuan
    register-mode: all
    parameters:
      application: ${spring.application.name}  # 显式传递应用名给Nacos
      appname: ${spring.application.name}  # 兼容不同版本的Nacos客户端
      dubbo.application.name: ${spring.application.name}  # Dubbo应用名称
      q3s.service-discovery.migration.step: APPLICATION_FIRST
  # 禁用QOS服务，避免端口22222冲突
  qos:
    enable: false
  # 扫描包，用于扫描 Dubbo 服务实现
  scan:
    base-packages: cloud.tangyuan.helloprovider
  # 协议配置
  protocol:
    name: dubbo
    port: -1  # -1 表示随机端口
  # 注册中心配置，使用 Nacos 作为注册中心
  registry:
    address: nacos://127.0.0.1:8810?backup=127.0.0.1:8820,127.0.0.1:8830
    timeout: 10000
    parameters:
      application: ${spring.application.name}  # 在注册中心配置中显式指定应用名称
      appname: ${spring.application.name}
      registry.type: service
      registry.simplified: false
      registry.useAsConfigCenter: false
      registry.useAsMetadataCenter: false
  # 超时时间和重试次数
  provider:
    timeout: 3000
    retries: 3
    loadbalance: roundrobin
    weight: 100

# Nacos客户端配置
nacos:
  client:
    application:
      name: ${spring.application.name}  # 明确设置Nacos客户端应用名称



